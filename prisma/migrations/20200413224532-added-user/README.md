# Migration `20200413224532-added-user`

This migration has been generated by Austin at 4/13/2020, 10:45:32 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Link" DROP COLUMN "authorId",
ADD COLUMN "userId" integer   ;

ALTER TABLE "public"."Profile" ;

CREATE UNIQUE INDEX "Link.userId" ON "public"."Link"("userId")

ALTER TABLE "public"."Link" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Profile" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200412225551-first-migration..20200413224532-added-user
--- datamodel.dml
+++ datamodel.dml
@@ -1,18 +1,32 @@
-// This is your Prisma schema file,
-// learn more about it in the docs: https://pris.ly/d/prisma-schema
+generator client {
+  provider = "prisma-client-js"
+}
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
-generator client {
-  provider = "prisma-client-js"
+model Link {
+  createdAt   DateTime @default(now())
+  description String
+  id          Int      @default(autoincrement()) @id
+  url         String
+  user        User?    @relation(fields: [userId], references: [id])
+  userId      Int?     @unique
 }
-model Link {
-    id Int @id @default(autoincrement())
-    createdAt DateTime @default(now())
-    description String
-    url String
+model User {
+  createdAt DateTime @default(now())
+  email     String   @unique
+  id        Int      @default(autoincrement()) @id
+  password  String
+  links     Link[]
 }
+
+model Profile {
+  id             Int      @default(autoincrement()) @id
+  user           User     @relation(fields: [userId], references: [id])
+  userId         Int      @unique
+  RememberTopics String[]
+}
```


